`# Masscan & Nmap Monitoring Tool

Скрипт для мониторинга сети, использующий `masscan` и `nmap`. Выполняет автоматическое сканирование IP-адресов, записывает результаты в базу данных SQLite, отслеживает изменения в состоянии портов и отправляет уведомления в Telegram, если найдены новые или измененные порты. Все результаты логируются, а старые логи архивируются.

## Функционал

- Автоматическое сканирование сети на основе указанных целей.
- Проверка всех портов с помощью `masscan` и детальное сканирование открытых портов с помощью `nmap`.
- Запись результатов в базу данных SQLite с учетом истории изменений.
- Отправка уведомлений о новых или изменённых портах в Telegram.
- Архивирование старых логов.

## Установка и настройка

### Требования

Убедитесь, что установлены следующие компоненты:

- **Linux** (проверено на Ubuntu).
- **masscan**:
  ```bash
  sudo apt install masscan
  ```
- **nmap**:
  ```bash
  sudo apt install nmap
  ```
- **sqlite3**:
  ```bash
  sudo apt install sqlite3
  ```
- **Python3** и библиотека `requests` для отправки уведомлений в Telegram:
  ```bash
  sudo apt install python3 python3-pip
  pip3 install requests
  ```

### Конфигурация

1. **Целевые IP-адреса**: Создайте файл `targets.txt` в директории со скриптом и добавьте в него IP-адреса или диапазоны для сканирования, по одному на строку.

2. **Скрипт уведомлений**: Создайте файл `notify_changes.py`, который будет содержать код для отправки уведомлений в Telegram. Не забудьте указать свой токен бота и ID чата.

3. **Создание директории для логов**: Скрипт автоматически создаст директорию `scan_history` для хранения логов.

### Запуск скрипта

Для запуска скрипта выполните следующую команду:

```bash
bash your_script.sh
```

Замените `your_script.sh` на имя вашего скрипта.

### Настройка запуска по расписанию с помощью cron

Чтобы автоматизировать запуск скрипта, вы можете использовать планировщик задач `cron`. Для этого выполните следующие шаги:

1. Откройте файл конфигурации cron для редактирования:

   ```bash
   crontab -e
   ```

2. Добавьте строку для выполнения скрипта по расписанию. Например, чтобы запускать его каждый день в 2 часа ночи, добавьте следующую строку:

   ```bash
   0 2 * * * /bin/bash /path/to/your_script.sh
   ```

   Замените `/path/to/your_script.sh` на полный путь к вашему скрипту.

3. Сохраните изменения и закройте редактор.

Теперь скрипт будет автоматически запускаться каждый день в 2 часа ночи.

## Лицензия

Этот проект лицензируется под лицензией MIT. Подробности смотрите в файле `LICENSE`.
